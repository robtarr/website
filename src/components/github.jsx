'use strict'

let React = require('react');
let apiFetch = require('../js/apiFetch.js');

module.exports = React.createClass({
  displayName: 'GithubReact',
  refreshTime: 1000 * 60,

  componentDidMount: function() {
    let _getInfo = () => {
      apiFetch('/data/github.json')
        .then((data) => {
          this.setState(data);
        })
    };

    setInterval(_getInfo, this.refreshTime);
  },

  getInitialState: function() {
    if (typeof initialData === 'object' &&
        typeof initialData.github === 'object') {

      return initialData.github;
    }

    return this.props;
  },

  render: function() {
    let { repo, date } = this.state;
    let url = 'http://github.com/' + this.state.repo;

    return (
      <div>
        <svg className='icon icon-github recentList-item-icon'>
          <path d='M40.060 15.535l0.030-0.148c-3.315-0.663-6.717-0.67-8.775-0.584 0.338-1.218 0.44-2.62 0.44-4.183 0-2.242-0.842-4.035-2.21-5.4 0.239-0.771 0.558-2.484-0.319-4.677 0 0-1.547-0.491-5.046 1.851-1.371-0.343-2.829-0.512-4.29-0.512-1.607 0-3.232 0.205-4.746 0.62-3.611-2.463-5.205-1.959-5.205-1.959-1.040 2.602-0.397 4.528-0.202 5.007-1.223 1.32-1.969 3.005-1.969 5.070 0 1.559 0.177 2.958 0.611 4.174-2.076-0.076-5.354-0.046-8.55 0.593l0.029 0.148c3.216-0.643 6.515-0.665 8.578-0.587 0.096 0.252 0.202 0.496 0.321 0.732-2.040 0.066-5.524 0.326-8.862 1.268l0.041 0.145c3.365-0.949 6.879-1.202 8.899-1.264 1.219 2.272 3.622 3.74 7.898 4.201-0.607 0.408-1.226 1.101-1.477 2.274-0.827 0.396-3.445 1.361-5.015-1.34 0 0-0.879-1.607-2.562-1.733 0 0-1.632-0.025-0.113 1.017 0 0 1.092 0.515 1.846 2.449 0 0 0.983 3.299 5.727 2.24v3.408c0 0-0.1 1.205-1.205 1.607 0 0-0.653 0.452 0.051 0.703 0 0 3.063 0.251 3.063-2.259v-3.716c0 0-0.121-1.474 0.602-1.986v6.103c0 0-0.050 1.456-0.803 2.009 0 0-0.502 0.904 0.602 0.653 0 0 2.109-0.301 2.21-2.762l0.048-6.177h0.507l0.048 6.177c0.1 2.461 2.21 2.762 2.21 2.762 1.104 0.251 0.602-0.653 0.602-0.653-0.753-0.552-0.803-2.009-0.803-2.009v-6.051c0.724 0.563 0.602 1.933 0.602 1.933v3.716c0 2.511 3.063 2.259 3.063 2.259 0.703-0.251 0.051-0.703 0.051-0.703-1.105-0.402-1.206-1.607-1.206-1.607v-4.871c0-1.899-0.8-2.905-1.582-3.436 4.559-0.452 6.748-1.924 7.756-4.212 1.997 0.055 5.591 0.298 9.029 1.268l0.041-0.145c-3.418-0.964-6.989-1.214-9.006-1.272 0.096-0.231 0.179-0.471 0.253-0.719 2.048-0.085 5.466-0.084 8.794 0.581l-0.005-0.002zM9.537 21.012c-0.18 0-0.327-0.101-0.327-0.226s0.146-0.226 0.327-0.226c0.18 0 0.326 0.101 0.327 0.226s-0.146 0.226-0.327 0.226zM9.863 20.786c0-0 0-0 0-0s0-0 0-0v0zM10.039 21.765c-0.18 0-0.327-0.101-0.327-0.226s0.146-0.226 0.327-0.226c0.18 0 0.326 0.101 0.327 0.226s-0.146 0.225-0.327 0.225zM10.365 21.539c0-0 0-0 0-0s0-0 0-0v0zM8.406 19.631c-0 0.125-0.146 0.226-0.326 0.226s-0.327-0.101-0.327-0.226c0-0.125 0.146-0.226 0.327-0.226s0.326 0.101 0.326 0.226zM10.917 22.242c0-0 0-0 0-0v0c0-0 0-0 0-0zM8.406 19.631c0-0 0-0 0-0v0c0-0 0-0 0-0zM9.311 20.133c0-0 0-0 0-0s0-0 0-0v0zM8.984 20.358c-0.18 0-0.327-0.101-0.327-0.226s0.146-0.226 0.327-0.226c0.18 0 0.326 0.101 0.326 0.226s-0.146 0.225-0.326 0.225zM11.671 22.844c-0 0.125-0.146 0.226-0.327 0.226s-0.327-0.101-0.327-0.226 0.146-0.226 0.327-0.226c0.18 0 0.326 0.101 0.327 0.226zM10.917 22.242c-0 0.125-0.146 0.226-0.327 0.226s-0.327-0.101-0.327-0.226c0-0.125 0.146-0.226 0.327-0.226s0.326 0.101 0.327 0.226zM13.776 23.247c-0 0.125-0.146 0.226-0.327 0.226s-0.327-0.101-0.327-0.226c0-0.125 0.146-0.226 0.327-0.226s0.326 0.101 0.327 0.226zM14.841 23.072c-0 0.125-0.146 0.225-0.327 0.225s-0.327-0.101-0.327-0.226c0-0.125 0.146-0.226 0.327-0.226s0.326 0.101 0.327 0.226zM14.841 23.072c0-0 0-0 0-0s0-0 0-0v0zM13.776 23.247c0-0 0-0 0-0v0c0-0 0-0 0-0zM11.671 22.844c0 0 0 0 0-0v0c0 0 0 0 0-0zM12.726 23.247c0-0 0-0 0-0v0c0-0 0-0 0-0zM12.726 23.247c-0 0.125-0.146 0.226-0.327 0.226s-0.327-0.101-0.327-0.226c0-0.125 0.146-0.226 0.327-0.226s0.326 0.101 0.327 0.226zM28.851 13.636c0 5.405-4.029 5.551-8.999 5.551s-8.999-0.748-8.999-5.551c0-1.15 0.566-2.218 1.536-3.104 1.618-1.477 4.356-0.695 7.463-0.695 3.093-0 5.821-0.79 7.442 0.676l0 0c0.982 0.89 1.556 1.964 1.556 3.122zM16.259 13.945c0 0.992-0.56 1.797-1.248 1.797s-1.248-0.804-1.248-1.797c0-0.993 0.559-1.797 1.248-1.797s1.248 0.804 1.248 1.797l0 0zM26.304 13.945c0 0.992-0.559 1.797-1.248 1.797s-1.248-0.804-1.248-1.797c0-0.993 0.559-1.797 1.248-1.797s1.248 0.804 1.248 1.797l0 0zM20.349 16.305c0 0.259-0.21 0.468-0.468 0.468s-0.468-0.21-0.468-0.468c0-0.259 0.21-0.468 0.468-0.468s0.468 0.21 0.468 0.468zM18.788 17.489c-0.028-0.078 0.014-0.164 0.092-0.192s0.164 0.014 0.192 0.092c0.121 0.34 0.443 0.569 0.803 0.569s0.683-0.228 0.803-0.569c0.028-0.078 0.113-0.119 0.192-0.092s0.119 0.113 0.092 0.192c-0.163 0.46-0.6 0.769-1.087 0.769s-0.923-0.307-1.086-0.768l-0-0.001zM7.207 20.301l-0.326 1.137c0 0-0.085 0.411 0.302 0.484 0.404-0.008 0.371-0.386 0.343-0.509l-0.319-1.112z'></path>
        </svg>

        <h1 className='recentList-item-heading'>What Iâ€™m Working On</h1>
        <a className='recentList-item-externalLink' data-category='github' href='//github.com/robtarr'>
          github.com
        </a>
        <article>
          <div className='recentList-item-detail'>
            <p>
              Pushed code to <a href={ url }>{ repo }</a>
              <span className='meta'>
                { date }
              </span>
            </p>
          </div>
        </article>
      </div>)
  },
})
